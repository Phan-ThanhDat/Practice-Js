<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>Funny</title>

    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,400i,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">


</head>

<body>
<header class="header">
    <div class="view-range">
        <div class="content-header header__logo-name-company">
            <div class="header__logo">
                <i class="fas fa-link header__icon"></i>
            </div>
            <h3 class="header__name-company">Lord Software</h3>
        </div>
    </div>
</header>

<div class="list">
    <div class="view-range module-worker">
        <h3 class="list__name">List of particpants</h3>
        <div class="list__infos">
            <div class="list__row list__row--adding">
                <div class="content-input list__input-btn">
                    <form id="form-worker">
                        <div class="inputs">
                            <div class="input">
                                <input data-rules="required" name="fname" type="text" class="input__adding"
                                       placeholder="Full name">
                            </div>
                            <div class="input">
                                <input data-rules="required|email" name="email" type="email"
                                       class="input__adding input__adding--mail" placeholder="E-mail address">
                            </div>
                            <div>
                                <input data-rules="required|tel" name="tel" type="tel" class="input__adding"
                                       placeholder="Phone number">
                            </div>
                        </div>
                        <button class="btn btn--add" type="submit">Add new</button>
                        <button class="btn btn--add" type="reset">Reset</button>
                    </form>
                </div>
            </div>
            <div class="list__infos">
                <table class="table">
                    <thead>
                    <tr>
                        <th>
                            <div class="list__t-name-icon">
                                <h3 class="title title--name">Name</h3>
                                <i class="fas fa-arrow-down list__t-icon"></i>
                            </div>
                        </th>
                        <th>
                            <h3 class="title title--mail">E-mail address</h3>
                        </th>
                        <th>
                            <h3 class="title title--tel">Phone number</h3>
                        </th>
                        <th></th>

                    </tr>
                    </thead>

                    <tbody>
                    <tr>
                        <td>
                            <p class="info__text info__text--name">Joe Doe</p>
                        </td>
                        <td>
                            <p class="info__text info__text--mail">john.doe@gmail.com</p>
                        </td>
                        <td>
                            <p class="info__text info__text--tel">0405678471</p>
                        </td>
                        <td>
                            <div class="list__cover-icons">
                                <i class="fas fa-pencil-alt info__icon"></i>
                                <i class="fas fa-trash info__icon"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p class="info__text info__text--name">George Clooney</p>
                        </td>
                        <td>
                            <p class="info__text info__text--mail">george.clooney@hollywood.com</p>
                        </td>
                        <td>
                            <p class="info__text info__text--tel">0504629898</p>
                        </td>
                        <td>
                            <div class="list__cover-icons">
                                <i class="fas fa-pencil-alt info__icon"></i>
                                <i class="fas fa-trash info__icon"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p class="info__text info__text--name"> Clooney</p>
                        </td>
                        <td>
                            <p class="info__text info__text--mail">george.clooney@hollywood.com</p>
                        </td>
                        <td>
                            <p class="info__text info__text--tel">0504629898</p>
                        </td>
                        <td>
                            <div class="list__cover-icons">
                                <i class="fas fa-pencil-alt info__icon"></i>
                                <i class="fas fa-trash info__icon"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p class="info__text info__text--name"> Clooney</p>
                        </td>
                        <td>
                            <p class="info__text info__text--mail">george.clooney@hollywood.com</p>
                        </td>
                        <td>
                            <p class="info__text info__text--tel">0504629898</p>
                        </td>
                        <td>
                            <div class="list__cover-icons">
                                <i class="fas fa-pencil-alt info__icon"></i>
                                <i class="fas fa-trash info__icon"></i>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- <div class="list__row list__row--infos">
                <div class="content-info list__title">
                    <div class="list__t-name-icon">
                        <h3 class="title title--name">Name</h3>
                        <i class="fas fa-arrow-down list__t-icon"></i>
                    </div>
                    <h3 class="title title--mail">E-mail address</h3>
                    <h3 class="title title--tel">Phone number</h3>
                </div>
            </div> -->


            <!-- <div class="list__detail">
                <div class="list__row list__row--infos">
                    <div class="content-info info">
                        <p class="info__text info__text--name">Joe Doe</p>
                        <p class="info__text info__text--mail">john.doe@gmail.com</p>
                        <p class="info__text info__text--tel">0405678471</p>
                        <div class="list__cover-icons">
                            <i class="fas fa-pencil-alt info__icon"></i>
                            <i class="fas fa-trash info__icon"></i>
                        </div>

                    </div>
                </div>

                <div class="list__row list__row--infos">
                    <div class="content-info info">
                        <p class="info__text info__text--name">George Clooney</p>
                        <p class="info__text info__text--mail">george.clooney@hollywood.com</p>
                        <p class="info__text info__text--tel">0504629898</p>
                        <div class="list__cover-icons">
                            <i class="fas fa-pencil-alt info__icon"></i>
                            <i class="fas fa-trash info__icon"></i>
                        </div>
                    </div>
                </div>

                <div class="list__row list__row--infos">
                    <div class="content-info info">
                        <p class="info__text info__text--name">George Clooney</p>
                        <p class="info__text info__text--mail">george.clooney@hollywood.com</p>
                        <p class="info__text info__text--tel">0504629898</p>
                        <div class="list__cover-icons">
                            <i class="fas fa-pencil-alt info__icon"></i>
                            <i class="fas fa-trash info__icon"></i>
                        </div>
                    </div>
                </div>

                <div class="list__row list__row--infos">
                    <div class="content-info info">
                        <p class="info__text info__text--name">George Clooney</p>
                        <p class="info__text info__text--mail">george.clooney@hollywood.com</p>
                        <p class="info__text info__text--tel">0504629898</p>
                        <div class="list__cover-icons">
                            <div class="info__icon">
                                <i class="fas fa-pencil-alt"></i>
                            </div>

                            <div class="info__icon">
                                <i class="fas fa-trash"></i>
                            </div>

                        </div>

                    </div>
                </div>
            </div> -->

            <div class="list__row list__row--infos">
                <div class="content-input list__edit-save">
                    <div class="input">
                        <input type="text" class="input__editing" value="George Clooney">
                        <input type="email" class="input__editing input__editing--mail"
                               value="george.clooney@hollywood.com">
                        <input type="tel" class="input__editing" value="0504629898">
                    </div>
                    <div class="list__btn">
                        <button class="btn btn--cancel">Cancel</button>
                        <button class="btn btn--save">Save</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="list">
        <ul>
            <li class="list-item" data-animal-code="dog" data-id="1">salsla</li>
            <li class="list-item">Cat</li>
            <li class="list-item">Rat</li>
        </ul>
    </div>
</div>

<script>

    workersModule = (function () {

        function init() {
            validateFormWorker.init();
            dataTableWorker.init();
        }


        function unLoad() {

        }


        return {
            init: init,
            unLoad: unLoad,
        }

    })();


    // validate = new validateForm('form-worker');
    //
    // validate.reset();
    // validate.onSubmit(function (e) {
    //
    // });

    // validate.customValidatrion = {
    //     'checkPasswordLength' : function (value) {
    //
    //     }
    // }

    //


    validateFormWorker = (function () {


        var form = document.getElementById('form-worker');
        var btnSubmit = form.querySelector('button[type="submit"]');
        var inputs = form.querySelectorAll('input');


        var inputStates = {
            fname: {
                value: '',
                valid: false,
                errMessage: '',
            },
            email: {
                value: '',
                valid: false,
                errMessage: '',
            },
            tel: {
                value: '',
                valid: false,
                errMessage: '',
            }

        };

        function inputChange(e) {
            inputStates[e.target.name].value = e.target.value;
            validateInput(e.target.name);
            console.log(inputStates)
        }


        function validateInput(input) {
            switch (input) {
                case 'fname':
                    inputStates.fname.valid = Boolean(inputStates.fname.value);
                    if (!inputStates.fname.valid) {
                        inputStates.fname.errMessage = 'Not empty';
                    } else {
                        inputStates.fname.errMessage = '';
                    }
                    break;
                case 'email':

                    // sasasa
                    inputStates.email.valid = Boolean(inputStates.email.value);
                    if (!inputStates.email.valid) {
                        inputStates.email.errMessage = 'Not empty';
                    }
                    if (!validateEmail(inputStates.email.value)) {
                        inputStates.email.errMessage = 'Email wrong';
                        inputStates.email.valid = false;
                    }
                    else {
                        inputStates.email.errMessage = '';
                    }

                    break;
                case 'tel':
                    inputStates.tel.valid = Boolean(inputStates.tel.value);
                    if (!inputStates.tel.valid) {
                        inputStates.tel.errMessage = 'Not empty';
                    } else {
                        inputStates.tel.errMessage = '';
                    }
                    break;
            }

            renderInput(input);

        }

        function renderInput(input) {
            var inputSelector = form.querySelector(`input[name="${input}"]`);

            if (!inputStates[input].valid) {
                inputSelector.classList.add('input--error');

                inputSelector.insertAdjacentHTML('afterend', `
                    <div class="input__error">${inputStates[input].errMessage}</div>

               `)
            } else if (inputSelector.classList.contains('input--error')) {
                inputSelector.classList.remove('input--error');
                inputSelector.parentElement.querySelector('.input__error').remove();
            }

            checkFormCanBeSubmit();

        }

        function checkFormCanBeSubmit() {

            var isReady = true;
            var obj = Object.keys(inputStates); // ['fname', 'tel']

            for ( let i = 0; i < obj.length; i+=1){
                if (!inputStates[obj[i]].valid){
                    isReady = false;
                    break;
                }
            }

            if(!isReady && !btnSubmit.disabled) {
                btnSubmit.disabled = true;
            } else {
                btnSubmit.disabled = false;
            }

        }


        function validateEmail(mail) {
            if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(mail)) {
                return (true)
            }
            //alert("You have entered an invalid email address!")
            return (false)
        }

        function init() {
            btnSubmit.disabled = true;
            inputs.forEach(function (inputt) {
                inputt.addEventListener('input', inputChange)
            })
        }

        function unLoad() {
            inputs.forEach(function (input) {
                input.removeEventListener('input', inputChange)
            });
        }


        return {
            init: init,
            unLoad: unLoad,
        }

    })();

    dataTableWorker = (function () {

        function init() {

        }


        return {
            init: init,
        }

    })();


    workersModule.init();


    //
    // let workers= [
    //     {
    //         id: 'a123456aa1',
    //         name: 'DaveGreat',
    //         email: 'dave@gmail.com',
    //         tel: '123456789'
    //     },
    //     {
    //         id: 'aaaa1',
    //         name: 'beckham',
    //         email: 'davidbacks@gmail.com',
    //         tel: '6598741'
    //     },
    // ];
    // let addNewinfo = (function () {
    //
    //     let worker = {
    //       name: '',
    //       email:'',
    //       tel  : ''
    //     };
    //
    //     addinfoBtn =  () => {
    //         document.getElementsByClassName("list")[0].addEventListener("click", function (e){
    //             worker.name = '';
    //             worker.email = '';
    //             worker.tel = '';
    //             console.log(worker)
    //             checkFillInfo();
    //
    //             if ((e.target.classList.contains('btn--add') && document.getElementsByClassName("btn")[0].disabled === false)) {
    //                 console.log(worker)
    //                 let temp =  worker;
    //                 workers.push(temp);
    //                 console.log(workers)
    //                 document.getElementsByClassName("btn--add")[0].disabled = true;
    //             }
    //             console.log(e.target )
    //             console.log(document.getElementsByClassName("btn")[0])
    //         });
    //
    //
    //     };
    //
    //
    //     checkFillInfo = () => {
    //         indentifyFields();
    //
    //         if ((worker.name ==='') || (worker.email === '') || (worker.tel ==='')){
    //             document.getElementsByClassName("btn--add")[0].disabled = true;
    //             //console.log(document.getElementsByClassName("btn--add")[0]);
    //         }
    //
    //         else if ((worker.name !=='') && (worker.email !== '') && (worker.tel !=='')){
    //             document.getElementsByClassName("btn--add")[0].disabled = false;
    //             //console.log(document.getElementsByClassName("btn--add")[0]);
    //         }
    //
    //     };
    //
    //     indentifyFields = () => {
    //         if (document.getElementsByClassName('input__adding')[0].value !== '' ){
    //             worker.name = document.getElementsByClassName('input__adding')[0].value;
    //             // console.log(worker.name)
    //             // console.log(document.getElementsByClassName('input__adding')[0].value)
    //         }
    //         if (document.getElementsByClassName('input__adding--mail')[0].value !== ''){
    //             if (validateEmail(document.getElementsByClassName('input__adding--mail')[0].value)){
    //                 worker.email = document.getElementsByClassName('input__adding--mail')[0].value;
    //                 document.getElementById("false__email").dataset.text='';
    //                 document.getElementById("false__email").innerHTML=''
    //             }
    //
    //             else {
    //                 //let emailPostionAlert = document.getElementsByClassName('input__adding--mail')[0].getBoundingClientRect().top +10;
    //                 var emailFalse = document.getElementById("false__email");
    //                 //var t = document.createTextNode("CLICK ME");
    //                 //btn.appendChild(t);
    //                 //document.body.appendChild(btn);
    //                 emailFalse.setAttribute('data-text', 'email is not exact');
    //                 emailFalse.style.color = 'red';
    //                 emailFalse.innerHTML = emailFalse.dataset.text;
    //                 document.getElementsByClassName('input')[0].style.position='relative';
    //                 emailFalse.style.position = "absolute";
    //                 emailFalse.style.top = 110 + '%' ;
    //                 emailFalse.style.left = 32 + '%' ;
    //                 emailFalse.style.fontSize = 10+'px';
    //                 //document.body.appendChild(emailFalse);
    //             }
    //             // console.log(worker.email)
    //         }
    //
    //         if (document.getElementsByClassName('input__adding')[2].value !== ''){
    //             if (isPhoneNumber(document.getElementsByClassName('input__adding')[2].value)){
    //                 worker.tel = document.getElementsByClassName('input__adding')[2].value;
    //                 document.getElementById("false__tel").dataset.text='';
    //                 document.getElementById("false__tel").innerHTML=''
    //             }
    //
    //             else {
    //                 //let emailPostionAlert = document.getElementsByClassName('input__adding--mail')[0].getBoundingClientRect().top +10;
    //                 var telFalse = document.getElementById("false__tel");
    //                 //var t = document.createTextNode("CLICK ME");
    //                 //btn.appendChild(t);
    //                 //document.body.appendChild(btn);
    //                 telFalse.setAttribute('data-text', 'tel is not exact');
    //                 telFalse.style.color = 'red';
    //                 telFalse.innerHTML = telFalse.dataset.text;
    //                 document.getElementsByClassName('input')[0].style.position='relative';
    //                 telFalse.style.position = "absolute";
    //                 telFalse.style.top = 110 + '%' ;
    //                 telFalse.style.left = 75 + '%' ;
    //                 telFalse.style.fontSize = 10+'px';
    //                 //document.body.appendChild(emailFalse);
    //             }
    //             // console.log(worker.email)
    //         }
    //         //console.log(workers)
    //
    //     };
    //
    //     function validateEmail(mail)
    //     {
    //         if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(mail))
    //         {
    //             return (true)
    //         }
    //         //alert("You have entered an invalid email address!")
    //         return (false)
    //     }
    //
    //     let isPhoneNumber = input => {
    //
    //         try {
    //             let ISD_CODES = [93, 355, 213, 1684, 376, 244, 1264, 672, 1268, 54, 374, 297, 61, 43, 994, 1242, 973, 880, 1246, 375, 32, 501, 229, 1441, 975, 591, 387, 267, 55, 246, 1284, 673, 359, 226, 257, 855, 237, 1, 238, 1345, 236, 235, 56, 86, 61, 61, 57, 269, 682, 506, 385, 53, 599, 357, 420, 243, 45, 253, 1767, 1809, 1829, 1849, 670, 593, 20, 503, 240, 291, 372, 251, 500, 298, 679, 358, 33, 689, 241, 220, 995, 49, 233, 350, 30, 299, 1473, 1671, 502, 441481, 224, 245, 592, 509, 504, 852, 36, 354, 91, 62, 98, 964, 353, 441624, 972, 39, 225, 1876, 81, 441534, 962, 7, 254, 686, 383, 965, 996, 856, 371, 961, 266, 231, 218, 423, 370, 352, 853, 389, 261, 265, 60, 960, 223, 356, 692, 222, 230, 262, 52, 691, 373, 377, 976, 382, 1664, 212, 258, 95, 264, 674, 977, 31, 599, 687, 64, 505, 227, 234, 683, 850, 1670, 47, 968, 92, 680, 970, 507, 675, 595, 51, 63, 64, 48, 351, 1787, 1939, 974, 242, 262, 40, 7, 250, 590, 290, 1869, 1758, 590, 508, 1784, 685, 378, 239, 966, 221, 381, 248, 232, 65, 1721, 421, 386, 677, 252, 27, 82, 211, 34, 94, 249, 597, 47, 268, 46, 41, 963, 886, 992, 255, 66, 228, 690, 676, 1868, 216, 90, 993, 1649, 688, 1340, 256, 380, 971, 44, 1, 598, 998, 678, 379, 58, 84, 681, 212, 967, 260, 263],
    //                 //extract numbers from string
    //                 thenum = input.match(/[0-9]+/g).join(""),
    //                 totalnums = thenum.length,
    //                 last10Digits = parseInt(thenum) % 10000000000,
    //                 ISDcode = thenum.substring(0, totalnums - 10);
    //
    //             //phone numbers are generally of 8 to 16 digits
    //             if (totalnums >= 8 && totalnums <= 16) {
    //                 if (ISDcode) {
    //                     if (ISD_CODES.includes(parseInt(ISDcode))) {
    //                         return true;
    //                     } else {
    //                         return false;
    //                     }
    //                 } else {
    //                     return true;
    //                 }
    //             }
    //         } catch (e) {}
    //
    //         return false;
    //     };
    //
    //     init = () => {
    //         document.getElementsByClassName("btn")[0].disabled = true;
    //         addinfoBtn();
    //     };
    //     return {
    //         start: init
    //     };
    //
    // })();
    //
    //
    // addNewinfo.start();

</script>
</body>

</html>